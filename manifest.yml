---
applications:
- name: funding-service-design-assessment-dev
  memory: 64M
  buildpacks:
  - https://github.com/cloudfoundry/python-buildpack.git
  command: gunicorn wsgi:app -c run/gunicorn/devtest.py
  routes:
    - route: assessment.dev.gids.dev
  env:
    FLASK_ENV: dev
    FLASK_DEBUG: 1
    FUND_STORE_API_HOST: https://funding-service-design-fund-store-dev.london.cloudapps.digital
    APPLICATION_STORE_API_HOST: https://funding-service-design-application-store-dev.london.cloudapps.digital
    ASSESSMENT_STORE_API_HOST: https://funding-service-design-assessment-store-dev.london.cloudapps.digital
    AUTHENTICATOR_HOST: https://fsd:fsd@authenticator2.dev.gids.dev
    RSA256_PUBLIC_KEY_BASE64: ((RSA256_PUBLIC_KEY_BASE64))
    # Sentry DSN is OK to be public see: https://docs.sentry.io/product/sentry-basics/dsn-explainer/#dsn-utilization
    SENTRY_DSN: https://cae245fff7d8483e9d73c73b30137ffc@o1432034.ingest.sentry.io/4504418515550208
    ACCOUNT_STORE_API_HOST: https://funding-service-design-account-store-dev.london.cloudapps.digital
    GITHUB_SHA: ((GITHUB_SHA))
  health-check-http-endpoint: /healthcheck
  health-check-type: http
  health-check-invocation-timeout: 10
  services:
    - funding-service-magic-links-dev
    - form-uploads-dev

- name: funding-service-design-assessment-test
  memory: 512M
  buildpacks:
  - https://github.com/cloudfoundry/python-buildpack.git
  command: gunicorn wsgi:app -c run/gunicorn/devtest.py
  routes:
    - route: assessment.test.gids.dev
  env:
    FLASK_ENV: test
    ASSESSMENT_STORE_API_HOST: https://funding-service-design-assessment-store-test.london.cloudapps.digital
    APPLICATION_STORE_API_HOST: https://funding-service-design-application-store-test.london.cloudapps.digital
    FUND_STORE_API_HOST: https://funding-service-design-fund-store-test.london.cloudapps.digital
    AUTHENTICATOR_HOST: https://fsd:fsd@authenticator2.test.gids.dev
    RSA256_PUBLIC_KEY_BASE64: ((RSA256_PUBLIC_KEY_BASE64))
    # Sentry DSN is OK to be public see: https://docs.sentry.io/product/sentry-basics/dsn-explainer/#dsn-utilization
    SENTRY_DSN: https://cae245fff7d8483e9d73c73b30137ffc@o1432034.ingest.sentry.io/4504418515550208
    ACCOUNT_STORE_API_HOST: https://funding-service-design-account-store-test.london.cloudapps.digital
    GITHUB_SHA: ((GITHUB_SHA))
  services:
    - funding-service-magic-links-test
    - form-uploads-test
  health-check-http-endpoint: /healthcheck
  health-check-type: http
  health-check-invocation-timeout: 20
