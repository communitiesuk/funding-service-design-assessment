{% extends "base.html" %}
{%- from 'govuk_frontend_jinja/components/back-link/macro.html' import govukBackLink -%}
{%- from "govuk_frontend_jinja/components/table/macro.html" import govukTable -%}
{%  from 'macros/section_element.html' import section_element -%}
{%  from 'macros/criteria_element.html' import criteria_element -%}
{% block beforeContent %}{{ govukBackLink({'href': url_for("assess_bp.landing"), 'text': 'Back to assessment dashboard'}) }}{% endblock %}
{% block content %}
    </div>
    <div class="fsd-banner-background">
        <div class="govuk-width-container">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full">
                    <div class="govuk-grid-column-two-thirds">
                        <h1 class="govuk-heading-xl fsd-banner-content">Fund: {{ state.fund_name }}</h1>
                        <h2 class="govuk-heading-l fsd-banner-content">Project reference: {{ state.project_reference }}</h2>
                        <h3 class="govuk-body-l fsd-banner-content fsd-banner-collapse-padding">Project name: {{ state.project_name }}</h3>
                        <h3 class="govuk-body-l fsd-banner-content">Total funding requested: &pound;{{ "{:,.2f}".format(state.funding_amount_requested) }}</h3>
                        <h3 class="govuk-body-l fsd-banner-content fsd-banner-collapse-padding">{{ state.workflow_status | status_to_human }}</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="govuk-width-container">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
                <div class="govuk-grid-column-two-thirds">
                    {% for section in state.sections %}{{ section_element(section.name, section.sub_criterias) }}{% endfor %}
                    <h2 class="govuk-heading-l govuk-!-margin-top-8">Score the application</h2>
                    <p class="govuk-body">Assess all responses under each sub criteria.</p>
                    {% for criteria in state.criterias %}
                        {% set name_classes = "govuk-heading-m govuk-!-margin-bottom-2" %}
                        {% if loop.index > 0 %}
                            {% set name_classes = "govuk-heading-m govuk-!-margin-bottom-2 govuk-!-margin-top-8" %}
                        {% endif %}
                        {{
                        criteria_element(
                        criteria.sub_criterias,
                        criteria.name,
                        name_classes,
                        criteria.total_criteria_score,
                        criteria.total_criteria_score_possible,
                        criteria.weighting
                        )
                        }}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
