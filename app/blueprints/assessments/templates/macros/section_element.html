{%- from "govuk_frontend_jinja/components/table/macro.html" import govukTable -%}
{% macro section_element(name, sub_criterias, application_id, show_caption=True) %}
    {% if name != "Unscored" %}
        <h2 class="govuk-heading-l govuk-!-margin-top-4">{{ name }}</h2>
    {% endif %}

    {% set caption = "Review against legal and policy requirements." if name in ["Declarations", "Declaration"] else
                 ("Use for due diligence checks." if show_caption else "") %}
    <p class="govuk-body govuk-!-text-align-left govuk-!-font-weight-regular govuk-!-margin-bottom-4">
        {{ caption }}
    </p>
    <dl class="govuk-summary-list">
        {% set rows = [] %}
        {% for sub_criteria in sub_criterias %}
            {% set prev_subcriteria = sub_criterias[loop.index0 - 1] if prev else None %}
            {% set next_subcriteria = sub_criterias[loop.index0 + 1] if next else None %}
            {% set sub_criteria_url = url_for(
                'assessment_bp.display_sub_criteria',
                application_id=application_id,
                sub_criteria_id=sub_criteria.id,
                prev_sub_criteria_id=prev_subcriteria.id if prev_subcriteria,
                next_sub_criteria_id=next_subcriteria.id if next_subcriteria
            ) %}

            <div class="govuk-summary-list__row">
                <dd class="govuk-summary-list__actions govuk-!-text-align-left">
                    <a class="govuk-link" data-qa="sub_criteria_name" href="{{ sub_criteria_url }}">{{ sub_criteria.name }}</a>
                </dd>
            </div>
        {% endfor %}
    </dl>

{% endmacro %}
